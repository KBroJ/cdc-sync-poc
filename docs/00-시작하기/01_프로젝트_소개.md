# CDC PoC 프로젝트 소개

> **이 문서를 먼저 읽으세요**: CDC가 뭔지 모르는 상태에서 시작해도 됩니다.

---

## 1. 프로젝트 배경

### 1.1 실제 상황

```
법원도서관에서 새로운 통합관리시스템을 구축 중입니다.

- 기존 시스템(ASIS): 20년간 운영, 안정적
- 신규 시스템(TOBE): 새 표준으로 구축 중

문제: 1차에서 일부 시스템만 전환 → ASIS/TOBE가 공존해야 함
```

### 1.2 왜 CDC가 필요한가?

두 시스템 간 **실시간 데이터 동기화**가 필요합니다:

```
[기존 방식의 문제]

사서가 ASIS에서 도서 등록
     ↓
2시간 후...
     ↓
"TOBE에는 왜 안 보이죠?" (배치 동기화 주기)
```

```
[CDC 방식]

사서가 ASIS에서 도서 등록
     ↓
수 초 내
     ↓
TOBE에서도 바로 확인 가능!
```

### 1.3 핵심 도전 과제: 스키마가 다르다

ASIS와 TOBE는 **같은 데이터를 다른 형식**으로 저장합니다:

| 구분 | ASIS (구 시스템) | TOBE (신 시스템) |
|------|-----------------|-----------------|
| 테이블명 | `BOOK_INFO` | `TB_BOOK` |
| 제목 컬럼 | `BOOK_TITLE` | `TITLE` |
| 상태 컬럼 | `STATUS` (Y/N) | `IS_ACTIVE` (1/0) |
| 분류 코드 | `CATEGORY` (01, 02) | `CATEGORY_CD` (LIT, SCI) |

**단순 복사가 불가능** → 스키마 변환이 필요합니다.

---

## 2. 프로젝트 범위

### 2.1 테이블 분류

| 동기화 방향 | 테이블 수 | 설명 |
|------------|----------|------|
| ASIS → TOBE (단방향) | 47개 | ASIS에서만 관리, TOBE는 읽기만 |
| TOBE → ASIS (단방향) | 55개 | TOBE에서만 관리, ASIS는 읽기만 |
| 양방향 | 69개 | 양쪽 모두 수정 가능 |
| **총계** | **171개** | |

### 2.2 PoC에서 검증하는 것

| 항목 | 검증 내용 |
|------|----------|
| CDC 동작 | Debezium이 Oracle 변경을 정상 감지하는지 |
| 스키마 변환 | ASIS↔TOBE 매핑이 정상 동작하는지 |
| 무한루프 방지 | 해시 기반 차단이 동작하는지 |
| 충돌 해결 | LWW 정책이 정상 적용되는지 |

### 2.3 PoC 샘플 테이블 (4개)

| 테이블 | 동기화 방향 | ASIS | TOBE |
|--------|-----------|------|------|
| 도서 | 양방향 | BOOK_INFO | TB_BOOK |
| 회원 | 양방향 | MEMBER_INFO | TB_MEMBER |
| 레거시코드 | ASIS→TOBE | LEGACY_CODE | TB_LEGACY_CODE |
| 신규서비스 | TOBE→ASIS | NEW_SERVICE_RECV | TB_NEW_SERVICE |

---

## 3. 제약조건

프로젝트에서 반드시 지켜야 하는 조건들:

| 제약 | 설명 | 이유 |
|------|------|------|
| 기존 테이블 수정 불가 | ASIS 테이블에 컬럼 추가 불가 | 운영 중인 시스템 |
| 기존 소스 수정 불가 | ASIS 애플리케이션 코드 수정 불가 | 영향도 분석 불가 |
| 동기화용 테이블 생성 가능 | CDC_*, STAGING_* 테이블 신규 생성 | 별도 영역 |
| CDC 솔루션 미정 | PoC에서는 Debezium, 프로덕션은 미정 | 비용/기능 비교 필요 |

---

## 4. 기술 스택

| 구성요소 | 기술 | 버전 | 역할 |
|---------|------|------|------|
| DBMS | Oracle XE | 21c | ASIS/TOBE 각각 1개 |
| CDC | Debezium | 2.4 | 변경 감지 |
| 메시지 브로커 | Apache Kafka | 3.x | 이벤트 전달 |
| 동기화 서비스 | Java + Spring Boot | 17 / 3.2 | 스키마 변환, DB 적재 |
| 컨테이너 | Docker Compose | - | 전체 환경 관리 |

---

## 5. 다음 단계

1. **환경 시작하기** → [02_환경_시작_가이드.md](02_환경_시작_가이드.md)
2. **첫 동기화 테스트** → [03_첫_동기화_테스트.md](03_첫_동기화_테스트.md)
3. **CDC 개념 이해** → [../01-개념/01_CDC_개념.md](../01-개념/01_CDC_개념.md)

---

*작성일: 2026-01-14*
