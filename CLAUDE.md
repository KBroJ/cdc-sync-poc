# CDC 프로젝트 컨텍스트

## 프로젝트 정보

- **프로젝트명**: 법원도서관 미래통합관리시스템 구축 및 데이터 연계 활용성 강화
- **현재 단계**: 분석/설계
- **담당 영역**: CDC 동기화, API 연동

## 핵심 배경

- 기존 CLIMS(법원도서관 통합관리시스템)에서 미래통합관리시스템으로 전환
- **TOBE는 ASIS를 표준화하여 스키마가 다름** (컬럼명, 타입, 코드값 등 변환 필요)
- 1차에서 일부 시스템만 시범 적용 → ASIS/TOBE 공존
- CDC를 통한 양방향 데이터 동기화 필요

## 제약조건

- 기존 CLIMS 테이블 컬럼 추가 불가
- 기존 소스 수정 불가
- 동기화용 테이블 생성 가능
- CDC 솔루션 미정 (PoC에서는 Debezium 사용)

## 아키텍처 요약

```
ASIS CDC Agent → CDC_TOBE_TABLES(TOBE DB) → [스키마변환] → STAGING_TOBES → WORKER → TOBE 원본
TOBE CDC Agent → CDC_ASIS_TABLES(ASIS DB) → [역변환] → STAGING_ASIS → WORKER → ASIS 원본
```

- WORKER는 DB 프로시저로 구현
- **스키마 변환이 핵심** (테이블/컬럼/타입/코드값 매핑)
- 네트워크 통신으로 상대 DB에 전송

## 테이블 분류

| 동기화 방향 | 테이블 수 | 설명 |
|------------|----------|------|
| ASIS → TOBE (단방향) | 47개 | ASIS에서만 관리, TOBE는 읽기만 |
| TOBE → ASIS (단방향) | 55개 | TOBE에서만 관리, ASIS는 읽기만 |
| 양방향 | 69개 | 양쪽 모두 수정 가능, 충돌 위험 |

**총 171개 테이블**

## PoC 환경 (시뮬레이션)

| 구성요소 | 기술 스택 |
|---------|----------|
| DBMS | Oracle XE 21c x 2 (Docker) |
| CDC | Debezium 2.x |
| 메시지 브로커 | Apache Kafka |
| 컨테이너 | Docker Compose |

```
ASIS-Oracle (1521) ←→ Kafka + Debezium ←→ TOBE-Oracle (1522)
```

## 주요 문서 (읽는 순서)

| 순서 | 문서명 | 내용 |
|:----:|--------|------|
| 01 | `docs/01_CDC_동기화_설계_정리.md` | 전체 설계, 스키마 매핑 정의 |
| 02 | `docs/02_CDC_무한루프_방지_대안.md` | 무한루프 방지 메커니즘 |
| 03 | `docs/03_CDC_동기화_케이스_분류.md` | 케이스별 상세 분류 |
| 04 | `docs/04_CDC_충돌_정책.md` | 충돌 해결 정책 |
| 05 | `docs/05_CDC_에러코드_체계.md` | 에러 코드 및 화면 처리 |
| 06 | `docs/06_CDC_PoC_환경_구성.md` | Docker 기반 PoC 환경 |
| - | `docs/CDC 충돌케이스.xlsx` | 충돌 케이스 분석 (원본) |
| - | `img/CDC 초기 설계.png` | 아키텍처 도식 |

## 미정 사항

- CDC 솔루션 선정 (프로덕션용)
- 테이블별 상세 매핑 정의
- 동기화 지연 허용 범위
- 충돌 해결 정책 확정
